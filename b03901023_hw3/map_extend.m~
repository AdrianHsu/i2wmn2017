function [p] = map_extend(mobile, vX, vY, cX, cY, baseX, baseY)
    ms_num = 100;
    dist = 500;
    side = dist/sqrt(3);
    bs_x = side * [-3,-3,-3,-1.5,-1.5,-1.5,-1.5,0,0,0,0,0,1.5,1.5,1.5,1.5,3,3,3];
    bs_y = dist * [-1,0,1,-1.5,-0.5,0.5,1.5,-2,-1,0,1,2,-1.5,-0.5,0.5,1.5,-1,0,1];
    h_bs = 51.5;
    gr_db = 14;
    gr = fromdB(gr_db);
    
    for i = 1:ms_num
        [newX, newY, mobile{i}] = mobile{i}.update();
        if ~inpolygon(newX, newY, vX, vY)
            cell_label = 1;
            for j = 1:6
                if inpolygon(newX, newY, cX{j}, cY{j})
                    cell_label = j;
                    break;
                end
            end
            movetoX = newX - baseX(cell_label);
            movetoY = newY - baseY(cell_label);
            mobile{i} = mobile{i}.locate(movetoX, movetoY);
        end
        p(:,i) = mobile{i}.power(bs_x, bs_y, h_bs, gr);
    end
end
